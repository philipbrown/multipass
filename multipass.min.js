/* ========================================================================
 * MultiPass
 * https://github.com/philipbrown/multipass
 * ========================================================================
 * Copyright 2013, Philip Brown
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */
var MultiPass=function(){var e;return{settings:{multiselect:".multipass",inputBox:".search",json:null,options:null},init:function(t){e=this.settings;for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}e.select=$(e.multiselect);e.search=$(e.inputBox);if(e.json){this.setOptions(e.json);e.options=e.json}else{e.options=this.getOptions()}this.update(e.options)},setOptions:function(t){$.each(t,function(t,n){e.select.append('<option value="'+n+'">'+n+"</option>")})},getOptions:function(){return $("option",e.multiselect).map(function(){return $(this).text()}).get()},update:function(t){var n=this;e.search.keyup(function(){var r=$(this).val();$.each(t,function(t,i){if(i.search(new RegExp("^"+r+"","i"))!=-1){n.selectOption($("select"+e.multiselect)[0],$(e.multiselect+' option[value="'+i+'"]')[0]);return false}})})},selectOption:function(e,t){$select=$(e);t.selected=true;e.selectedIndex=t.index;var n=$select[0].scrollHeight;var r=$select.children().length;var i=Math.round(n/r);var s=i*t.index;$select.scrollTop(s)}}}()
